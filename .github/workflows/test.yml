name: Test micromamba docker image

on:
  pull_request:
    branches:
      - main
      - dev
  workflow_dispatch:

permissions:
  contents: read

env:
  FORCE_JAVASCRIPT_ACTIONS_TO_NODE24: 'true'

jobs:
  default_base_image_tests:
    name: default base_image tests
    runs-on: ubuntu-24.04
    steps:
      - name: Checkout source
        uses: actions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8
        with:
          submodules: recursive
          persist-credentials: false
      - name: Setup nox
        uses: wntrblm/nox@2254a1ee500bbf66c2a5e4ff5dad030b9f579dcd
      - name: Run tests
        run: nox -s "default_base_image_tests"
